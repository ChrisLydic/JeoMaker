var bootState={preload:function(){game.load.image("progressBar","../assets/progressBar.png")},create:function(){game.stage.backgroundColor=DARK_BLUE,game.state.start("load")}},loadState={preload:function(){var a=game.add.sprite(game.world.centerX,game.world.centerY,"progressBar");a.anchor.setTo(.5,.5),game.load.setPreloadSprite(a),game.load.image("button","../assets/empty.png")},create:function(){game.state.start("menu")}},menuState={create:function(){this.makeMenu()},startMake:function(){game.state.start("makeMenu")},play:function(){game.state.start("playMenu")},credits:function(){game.world.removeAll()},makeMenu:function(){var a=game.add.text(game.world.centerX,game.world.centerY-85,"JeoMaker",{font:"60px Arial",fill:"#FFFFFF"});a.anchor.setTo(.5,.5);var b="30px Arial";new LabelButton("Create a New Game",b,LABEL_WHITE,"center",!1,game,game.world.centerX,game.world.centerY-10,"button",this.startMake,this),new LabelButton("Play",b,LABEL_WHITE,"center",!1,game,game.world.centerX,game.world.centerY+40,"button",this.play,this)}},makeMenuState={storage:[],name:"",create:function(){if(localStorage.length>0){for(var a=0,b=localStorage.length;b>a;a++)this.storage.indexOf(localStorage.key(a))>-1||this.storage.push(localStorage.key(a));this.nameMenu()}else document.getElementById("nameForm").style.display="flex"},makeStart:function(){game.state.start("make")},gameMenu:function(){var a="30px Arial";new LabelButton("One Round",a,LABEL_WHITE,"center",!1,game,game.world.centerX,game.world.centerY-50,"button",partial(this.makeBoard,!1),this),new LabelButton("Double",a,LABEL_WHITE,"center",!1,game,game.world.centerX,game.world.centerY-10,"button",partial(this.makeBoard,!0),this)},nameMenu:function(){document.getElementById("ddown").style.display="flex";var a=document.getElementById("down");a.innerHTML="";for(var b=0;b<this.storage.length;b++)a.innerHTML=a.innerHTML+"<option>"+this.storage[b]+"</option>";a.innerHTML=a.innerHTML+"<option>New</option>"},loadJeo:function(){var a=document.getElementById("down"),b=a.options[a.selectedIndex].text;document.getElementById("ddown").style.display="none","New"===b?document.getElementById("nameForm").style.display="flex":(currBoard=unobjectify(JSON.parse(localStorage.getItem(b))),this.makeStart())},inputName:function(){var a=document.getElementById("name");this.name=a.elements.nameText.value,document.getElementById("nameForm").style.display="none",this.gameMenu()},makeBoard:function(a){currBoard=new Jeo(this.name,a),this.makeStart()}},playMenuState={storage:[],create:function(){if(currPlayers=[],localStorage.length>0){for(var a=0,b=localStorage.length;b>a;a++)this.storage.indexOf(localStorage.key(a))>-1||this.storage.push(localStorage.key(a));this.nameMenu()}else this.noSaves()},play:function(){var a=document.getElementById("player"),b=a.elements.playerName;currPlayers.length>1?(document.getElementById("players").innerHTML="",b.value="Team Name",document.getElementById("playerForm").style.display="none",game.state.start("play")):(b.value="Not enough players",console.log("Not enough players"))},"return":function(){document.getElementById("noSaves").style.display="none",game.state.start("menu")},noSaves:function(){document.getElementById("noSaves").style.display="flex"},nameMenu:function(){document.getElementById("playForm").style.display="flex";var a=document.getElementById("games");a.innerHTML="";for(var b=0;b<this.storage.length;b++)a.innerHTML=a.innerHTML+"<option>"+this.storage[b]+"</option>"},loadJeo:function(){var a=document.getElementById("games"),b=a.options[a.selectedIndex].text;document.getElementById("playForm").style.display="none",currBoard=unobjectify(JSON.parse(localStorage.getItem(b))),this.playerMenu()},playerMenu:function(){document.getElementById("playerForm").style.display="flex",document.getElementById("player").elements.playerName.select()},makePlayer:function(){var a=document.getElementById("player"),b=a.elements.playerName,c=a.elements.colors.value;b.value=b.value.trim();for(var d=!1,e=0;e<currPlayers.length;e++)currPlayers[e].name==b.value&&(d=!0);if(0==b.value.length||d)b.value="Invalid player name",console.log("Invalid player name");else{var f=new Player(b.value,c);currPlayers.push(f),b.value="",b.focus(),this.updatePlayers()}},updatePlayers:function(){var a=document.getElementById("players");a.innerHTML="";for(var b=0;b<currPlayers.length;b++)a.innerHTML=a.innerHTML+"<option>"+currPlayers[b].name+"</option>"},colorSet:function(){var a=document.getElementById("colors");a.value=a.value}},makeState={Opt:{MAIN:1,HELP:2,SAVE:3,CANCEL:4},create:function(){switch(currBoard.curr){case 1:this.currRound=currBoard.b1;break;case 2:this.currRound=currBoard.b2}console.log(currBoard),this.build()},update:function(){for(var a=0;a<this.buttons.length;a++)this.buttons[a].isOver()},build:function(){layers={bgLayer:this.add.group(),btnLayer:this.add.group(),textLayer:this.add.group()},this.buttons=[];var a,b,c,d,e,f,g,h,i="aq",j="topic";for(b=0;6>b;b++)for(var c=0;6>c;c++){posX=PADDING*(c+1)+widthBox*c,posY=PADDING*(b+1)+heightBox*b,0===b?(a=LIGHT_BLUE,g=[c],h=j,e=this.currRound.topics[c],f=e.length<13?.3*heightBox:e.length<30?.25*heightBox:.2*heightBox,d={font:f+"px Arial",fill:LABEL_WHITE,align:"center",wordWrap:!0,wordWrapWidth:widthBox}):(a=this.currRound.board[b-1][c].isFull()?PURPLE:BLUE,g=[b-1,c],h=i,e="$"+this.currRound.money[b-1].toString(),d={font:.6*heightBox+"px Arial",fill:LABEL_BLUE});var k=game.add.text(posX+widthBox/2,posY+heightBox/2,e,d);k.anchor.setTo(.5,.5),layers.textLayer.add(k),this.buttons.push(new RectButton(posX,posY,widthBox,heightBox,a,partial(this.promptRunner,h,g)))}var l=game.add.graphics(0,0);layers.bgLayer.add(l),l.beginFill(LIGHT_BLUE),l.drawRect(0,7*PADDING+6*heightBox,w,MENU_BAR_HEIGHT),l.endFill();var m=PADDING/2,n=7*PADDING+6*heightBox+m,o=50,p=200,q=100,r={font:"30px Arial",fill:LABEL_WHITE};if(h=i,g=["F"],currBoard.isDouble){this.buttons.push(new RectButton(w/2-(1.5*p+m),n,p,o,BLUE,this.switchBoard));var s;s=currBoard.finalQ.isFull()?PURPLE:BLUE,this.buttons.push(new RectButton(w/2+(p/2+m),n,p,o,s,partial(this.promptRunner,h,g)));var t=game.add.text(w/2-(1.5*p+m)+p/2,n+o/2,"Switch Board",r);t.anchor.setTo(.5,.5),layers.textLayer.add(t);var u=game.add.text(w/2+(p/2+m)+p/2,n+o/2,"Final Q",r);u.anchor.setTo(.5,.5),layers.textLayer.add(u)}else{var s;s=currBoard.finalQ.isFull()?PURPLE:BLUE,this.buttons.push(new RectButton(w/2-p/2,n,p,o,s,partial(this.promptRunner,h,g)));var t=game.add.text(w/2,n+o/2,"Final Q",r);t.anchor.setTo(.5,.5),layers.textLayer.add(t)}this.buttons.push(new RectButton(m,n,q,o,BLUE,partial(this.popUp,"menu"))),this.buttons.push(new RectButton(w-(m+100),n,q,o,BLUE,partial(this.popUp,"save")));var t=game.add.text(m+q/2,n+o/2,"Menu",r);t.anchor.setTo(.5,.5),layers.textLayer.add(t);var v=game.add.text(w-(m+100)+q/2,n+o/2,"Save",r);v.anchor.setTo(.5,.5),layers.textLayer.add(v)},getInput:function(b){var c=document.getElementById(b);"aq"===b?(a=c.elements.answer.value,q=c.elements.question.value,this.updateAQ(a,q)):"topic"===b&&(topic=c.elements.topicText.value,this.updateTopic(topic)),document.getElementById(b+"Form").style.display="none",this.build()},promptRunner:function(a,b){window.ref=b;var c=makeState.currRound,d=document.getElementById(a);"aq"===a&&"F"!==b[0]?(d.elements.answer.value=c.board[window.ref[0]][window.ref[1]].a,d.elements.question.value=c.board[window.ref[0]][window.ref[1]].q):"aq"===a&&"F"===b[0]?(d.elements.answer.value=currBoard.finalQ.a,d.elements.question.value=currBoard.finalQ.q):"topic"===a&&(d.elements.topicText.value=c.topics[window.ref[0]]),document.getElementById(a+"Form").style.display="flex"},updateTopic:function(a){this.currRound.topics[window.ref[0]]=a},updateAQ:function(a,b){"F"===window.ref[0]?currBoard.finalQ.update(a,b):this.currRound.board[window.ref[0]][window.ref[1]].update(a,b)},popUp:function(a){switch(a){case"menu":document.getElementById(a).style.display="flex";break;case"save":currBoard.isFull()?this.save():document.getElementById(a).style.display="flex"}},menuInput:function(a){switch(a){case this.Opt.MAIN:document.getElementById("menu").style.display="none",game.state.start("menu");break;case this.Opt.HELP:document.getElementById("menu").style.display="none",document.getElementById("help").style.display="flex";break;case this.Opt.SAVE:document.getElementById("save").style.display="none",this.save();break;case this.Opt.CANCEL:document.getElementById("menu").style.display="none",document.getElementById("help").style.display="none",document.getElementById("save").style.display="none"}},save:function(){localStorage.setItem(currBoard.name,JSON.stringify(objectify(currBoard)))},switchBoard:function(){game.world.removeAll(),1===currBoard.curr?(currBoard.curr=2,game.state.start("make")):(currBoard.curr=1,game.state.start("make"))}},playState={Opt:{MAIN:1,HELP:2,CANCEL:3},create:function(){switch(currBoard.curr){case 1:this.currRound=currBoard.b1;break;case 2:this.currRound=currBoard.b2}this.build()},update:function(){for(var a=0;a<this.buttons.length;a++)this.buttons[a].isOver()},build:function(){layers={bgLayer:this.add.group(),btnLayer:this.add.group(),textLayer:this.add.group()},this.buttons=[];var a,b,c,d,e,f,g=game.add.graphics(0,0);for(layers.bgLayer.add(g),b=0;6>b;b++)for(var c=0;6>c;c++){posX=PADDING*(c+1)+widthBox*c,posY=PADDING*(b+1)+heightBox*b,0===b?(a=LIGHT_BLUE,e=this.currRound.topics[c],f=e.length<13?.3*heightBox:e.length<30?.25*heightBox:.2*heightBox,d={font:f+"px Arial",fill:LABEL_WHITE,align:"center",wordWrap:!0,wordWrapWidth:widthBox},g.beginFill(a),g.drawRect(posX,posY,widthBox,heightBox),g.endFill()):(a=this.currRound.board[b-1][c].isFull()?PURPLE:BLUE,e="$"+this.currRound.money[b-1].toString(),d={font:.6*heightBox+"px Arial",fill:LABEL_BLUE},this.buttons.push(new RectButton(posX,posY,widthBox,heightBox,a,partial(this.promptRunner,b-1,c))));var h=game.add.text(posX+widthBox/2,posY+heightBox/2,e,d);h.anchor.setTo(.5,.5),layers.textLayer.add(h)}g.beginFill(LIGHT_BLUE),g.drawRect(0,7*PADDING+6*heightBox,w,MENU_BAR_HEIGHT),g.endFill();var i=PADDING/2,j=0,k=7*PADDING+6*heightBox+i,l=50,m=200,n=100,o={font:"30px Arial",fill:LABEL_WHITE};if(currBoard.isDouble){j=w-(2*m+n+3*i),this.buttons.push(new RectButton(j,k,m,l,BLUE,this.switchBoard)),j+=m/2;var p=game.add.text(j,k+l/2,"Switch Board",o);p.anchor.setTo(.5,.5),layers.textLayer.add(p)}j=w-(m+n+2*i),this.buttons.push(new RectButton(j,k,m,l,BLUE,partial(this.promptRunner,0,0))),j+=m/2;var q=game.add.text(j,k+l/2,"Final Q",o);q.anchor.setTo(.5,.5),layers.textLayer.add(q),j=w-(n+i),this.buttons.push(new RectButton(j,k,n,l,BLUE,this.menu)),j+=n/2;var r=game.add.text(j,k+l/2,"Menu",o);r.anchor.setTo(.5,.5),layers.textLayer.add(r)},promptRunner:function(a,b){game.world.removeAll();var c=playState.currRound.board[a][b].a;styles={font:"24px Arial",fill:LABEL_WHITE,align:"center",wordWrap:!0,wordWrapWidth:w-100};var d=game.add.text(w/2,h/2,c,styles);d.anchor.setTo(.5,.5)},menu:function(){document.getElementById("pMenu").style.display="flex"},menuInput:function(a){switch(a){case this.Opt.MAIN:document.getElementById("pMenu").style.display="none",game.state.start("menu");break;case this.Opt.HELP:document.getElementById("pMenu").style.display="none",document.getElementById("pHelp").style.display="flex";break;case this.Opt.CANCEL:document.getElementById("pMenu").style.display="none",document.getElementById("pHelp").style.display="none"}},switchBoard:function(){game.world.removeAll(),1===currBoard.curr?(currBoard.curr=2,game.state.start("play")):(currBoard.curr=1,game.state.start("play"))}},w=window.innerWidth,h=window.innerHeight,game=new Phaser.Game(w,h,Phaser.AUTO,"gameDiv"),currBoard,currPlayers=[],MAX_PLAYERS=7,LIGHT_BLUE=39423,BLUE=22015,DARK_BLUE=204,PURPLE=4469708,WHITE=16777215,LABEL_WHITE="#FFFFFF",LABEL_YELLOW="#FFCC33",LABEL_BLUE="#CCFFFF",PADDING=20,MENU_BAR_HEIGHT=70,heightBox,widthBox,calcBoxDim=function(){heightBox=(h-(MENU_BAR_HEIGHT+7*PADDING))/6,widthBox=(w-7*PADDING)/6};calcBoxDim();var partial=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.concat(Array.prototype.slice.call(arguments));return a.apply(this,c)}},objectify=function(a){var b;if(a.isDouble){for(var c=[],d=[],e=[],f=[],g=0;5>g;g++)for(var h=0;6>h;h++)c.push(a.b1.board[g][h].a),d.push(a.b1.board[g][h].q);for(var g=0;5>g;g++)for(var h=0;6>h;h++)e.push(a.b2.board[g][h].a),f.push(a.b2.board[g][h].q);b={isDouble:!0,name:a.name,b1:{topics:a.b1.topics,a:c,q:d},b2:{topics:a.b2.topics,a:e,q:f},"final":{a:a.finalQ.a,q:a.finalQ.q}}}else{for(var c=[],d=[],g=0;5>g;g++)for(var h=0;6>h;h++)c.push(a.b1.board[g][h].a),d.push(a.b1.board[g][h].q);b={isDouble:!1,name:a.name,b1:{topics:a.b1.topics,a:c,q:d},"final":{a:a.finalQ.a,q:a.finalQ.q}}}return b},unobjectify=function(a){var b=new Jeo(a.name,a.isDouble);if(a.isDouble){b.b1.topics=a.b1.topics,b.b2.topics=a.b2.topics,b.finalQ.update(a["final"].a,a["final"].q);for(var c=0,d=0;5>d;d++)for(var e=0;6>e;e++)b.b1.board[d][e].update(a.b1.a[c],a.b1.q[c]),c++;c=0;for(var d=0;5>d;d++)for(var e=0;6>e;e++)b.b2.board[d][e].update(a.b2.a[c],a.b2.q[c]),c++}else{b.b1.topics=a.b1.topics,b.finalQ.update(a["final"].a,a["final"].q);for(var c=0,d=0;5>d;d++)for(var e=0;6>e;e++)b.b1.board[d][e].update(a.b1.a[c],a.b1.q[c]),c++}return b},AQ=function(){this.a="Answer",this.q="Question"};AQ.prototype.constructor=AQ,AQ.prototype.update=function(a,b){this.a=a,this.q=b},AQ.prototype.isFull=function(){return"Answer"===this.a||"Question"===this.q?!1:!0};var Board=function(a){this.isDouble=a,this.topics=["Topic","Topic","Topic","Topic","Topic","Topic"],this.board=[];for(var b=0;5>b;b++)this.board[b]=[new AQ,new AQ,new AQ,new AQ,new AQ,new AQ];this.isDouble?this.money=[400,800,1200,1600,2e3]:this.money=[200,400,600,800,1e3]};Board.prototype.constructor=Board,Board.prototype.isFull=function(){for(var a=0;a<this.topics.length;a++)if("Topic"===this.topics[a])return!1;for(var a=0;a<this.board.length;a++)for(var b=0;b<this.board[a].length;b++)if(!this.board[a][b].isFull())return!1;return!0};var Jeo=function(a,b){this.name=a,this.curr=1,this.isDouble=b,this.finalQ=new AQ,this.b1=new Board(!1),this.isDouble&&(this.b2=new Board(!0))};Jeo.prototype.constructor=Jeo,Jeo.prototype.updateFinalQ=function(a,b){this.finalQ.update(a,b)},Jeo.prototype.isFull=function(){return this.isDouble?this.finalQ.isFull()&&this.b1.isFull()&&this.b2.isFull():this.finalQ.isFull()&&this.b1.isFull()};var Player=function(a,b){this.name=a,this.avatar=b,this.score=0};Player.prototype.constructor=Player,Player.prototype.setScore=function(a){score+=a},Player.prototype.edit=function(a,b){this.name=a,this.avatar=b};var RectButton=function(a,b,c,d,e,f){this.isIn=!1,this.x=a,this.y=b,this.width=c,this.height=d,this.color=e,this.onDown=f,this.btn=new Phaser.Rectangle(this.x,this.y,this.width,this.height);var g=new Phaser.Rectangle(this.x,this.y,this.width,this.height);this.graphics=game.add.graphics(0,0),void 0!==typeof layers&&layers.btnLayer.add(this.graphics),this.draw(this.color,1);var h=function(a){g.contains(a.x,a.y)&&f()};game.input.onDown.add(h)};RectButton.prototype.constructor=RectButton,RectButton.prototype.isOver=function(){this.btn.contains(game.input.mousePointer.x,game.input.mousePointer.y)&&!this.isIn?(this.draw(16777215,.1),this.isIn=!0):!this.btn.contains(game.input.mousePointer.x,game.input.mousePointer.y)&&this.isIn&&(this.draw(this.color,1),this.isIn=!1)},RectButton.prototype.draw=function(a,b){this.graphics.beginFill(a,b),this.graphics.drawRect(this.x,this.y,this.width,this.height),this.graphics.endFill()};var LabelButton=function(a,b,c,d,e,f,g,h,i,j,k){Phaser.Button.call(this,f,g,h,i,j,k),this.anchor.setTo(.5,.5),this.label=new Phaser.Text(f,0,0,a,{font:b,fill:c,align:d,wordWrap:e,wordWrapWidth:widthBox}),this.label.anchor.setTo(.5,.5),this.addChild(this.label),this.setLabel(a),f.add.existing(this)};LabelButton.prototype=Object.create(Phaser.Button.prototype),LabelButton.prototype.constructor=LabelButton,LabelButton.prototype.setLabel=function(a){this.label.setText(a)},game.state.add("boot",bootState),game.state.add("load",loadState),game.state.add("menu",menuState),game.state.add("makeMenu",makeMenuState),game.state.add("playMenu",playMenuState),game.state.add("make",makeState),game.state.add("play",playState),game.state.start("boot");
//# sourceMappingURL=sourceMap.map